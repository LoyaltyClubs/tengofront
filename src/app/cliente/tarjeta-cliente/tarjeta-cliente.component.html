<div class="col-md-12">
  <div class="card">
    <div class="card-content p-4">
      <!-- Button trigger modal -->
      <button
        type="button"
        class="btn btn-primary float-end"
        data-bs-toggle="modal"
        data-bs-target="#exampleModal"
      >
        Nueva Tarjeta
      </button>

      <!-- Modal -->
      <div
        class="modal fade"
        id="exampleModal"
        tabindex="-1"
        aria-labelledby="exampleModalLabel"
        aria-hidden="true"
      >
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Crear Tarjeta</h5>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Close"
              ></button>
            </div>
            <form [formGroup]="formGroup" (ngSubmit)="agregarTarjeta()">
              <div class="modal-body">
                <div class="form-group label-floating">
                  <label class="control-label">Número</label>
                  <input
                    type="text"
                    formControlName="numero"
                    class="form-control"
                  />
                </div>
                <div class="form-group label-floating">
                  <label class="control-label">Fecha de Vencimiento</label>
                  <input
                    type="date"
                    class="form-control form-control-sm input-sm"
                    formControlName="fecha_vencimiento"
                    placeholder="dd/MM/yyyy"
                  />
                </div>
                <div class="form-group label-floating">
                  <label class="control-label">Saldo</label>
                  <input
                    type="number"
                    formControlName="saldo"
                    class="form-control"
                  />
                </div>
                <div>
                  <label class="label-control">Tipo tarjeta </label>
                  <select
                    class="bootstrap-select"
                    data-style="select-with-transition"
                    title="Tipo Tarjeta"
                    data-size="3"
                    formControlName="tipo_id"
                  >
                    <option disabled >Tipo</option>
                    <option value="5" selected>Nominada</option>
                    <option value="15">Innominada</option>
                  </select>
                </div>
              </div>
              <div class="modal-footer">
                <button
                  type="submit"
                  data-bs-dismiss="modal"
                  class="btn btn-primary"
                >
                  Guardar
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
      <div class="material-datatables">
        <table
          id="datatables"
          class="table table-striped table-no-bordered table-hover"
          cellspacing="0"
          width="100%"
          style="width: 100%"
        >
          <thead>
            <tr>
              <th>ID</th>
              <th>Válido hasta</th>
              <th>Número</th>
              <th>Estado</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let tarjeta of tarjetas">
              <td>{{ tarjeta.id }}</td>
              <td>{{ tarjeta.fecha_vencimiento | date:'shortDate'}}</td>
              <td>{{ tarjeta.numero }}</td>
              <td>
                <select
                class="form-control form-select w-100"
                  data-style="select-with-transition"
                  title="Estado"
                  data-size="3"
                  [(ngModel)]="tarjeta.estado"
                  style="margin-top: 10px"
                  (change)="cambiarEstado(tarjeta)"
                >
                  >
                  <option value="Vigente">Vigente</option>
                  <option value="Cancelada">Cancelada</option>
                  <option value="Bloqueada">Bloqueada</option>
                </select>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
